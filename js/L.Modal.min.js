/**
 * L.Modal v0.2.0
 * Modal/dialog window inside leaflet map
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],e):((t=t||self).L=t.L||{},t.L.Modal=e(t.L))}(this,(function(t){"use strict";return(t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t).Map.Modal=t.Handler.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,statics:{BASE_CLS:"leaflet-modal",HIDE:"modal.hide",SHOW_START:"modal.showStart",SHOW:"modal.show",CHANGED:"modal.changed",classNameToSelector:function(t){return(" "+t).split(" ").join(".").replace(/^\s+|\s+$/g,"")}},options:{OVERLAY_CLS:"overlay",MODAL_CLS:"modal",MODAL_CONTENT_CLS:"modal-content",INNER_CONTENT_CLS:"modal-inner",SHOW_CLS:"show",CLOSE_CLS:"close",closeTitle:"close",zIndex:1e4,transitionDuration:300,wrapperTemplate:['<div class="{OVERLAY_CLS}"></div>','<div class="{MODAL_CLS}"><div class="{MODAL_CONTENT_CLS}">','<span class="{CLOSE_CLS}" title="{closeTitle}">&times;</span>','<div class="{INNER_CONTENT_CLS}">{_content}</div>',"</div></div>"].join(""),template:"{content}",content:""},initialize:function(e,i){t.Handler.prototype.initialize.call(this,e),t.Util.setOptions(this,i),this._visible=!1;var n=this._container=t.DomUtil.create("div",t.Map.Modal.BASE_CLS,e._container);n.style.zIndex=this.options.zIndex,n.style.position="absolute",this._map._controlContainer.appendChild(n),t.DomEvent.disableClickPropagation(n).disableScrollPropagation(n),t.DomEvent.on(n,"contextmenu",t.DomEvent.stopPropagation),this.enable()},addHooks:function(){t.DomEvent.on(document,"keydown",this._onKeyDown,this),this._map.on({modal:this._show},this)},removeHooks:function(){t.DomEvent.off(document,"keydown",this._onKeyDown,this),this._map.off({modal:this._show},this)},hide:function(){return this._hide(),this},isVisible:function(){return this._visible},update:function(t){t?this._show(t):this._updatePosition()},setContent:function(t){this._getInnerContentContainer().innerHTML=t,this.update()},_updatePosition:function(){var t=this._getContentContainer(),e=this._map.getSize().y,i=t.offsetHeight;t.style.marginTop=i<e?(e-i)/2+"px":""},_show:function(e){var i=this;this._visible&&this._hide(),e=t.Util.extend({},this.options,e),this._render(e),this._setContainerSize(e),this._updatePosition(),t.Util.requestAnimFrame((function(){var e=i._getContentContainer();t.DomEvent.on(e,"transitionend",i._onTransitionEnd,i),t.DomEvent.disableClickPropagation(e),t.DomUtil.addClass(i._container,i.options.SHOW_CLS),t.Browser.any3d||t.Util.requestAnimFrame(i._onTransitionEnd,i)}));var n=this._container,o=n.querySelector("."+this.options.CLOSE_CLS);o&&t.DomEvent.on(o,"click",this._onCloseClick,this);var s=n.querySelector("."+this.options.MODAL_CLS);s&&t.DomEvent.on(s,"mousedown",this._onMouseDown,this),"function"==typeof e.onShow&&this._map.once(t.Map.Modal.SHOW,e.onShow),"function"==typeof e.onHide&&this._map.once(t.Map.Modal.HIDE,e.onHide),this._map.fire(t.Map.Modal.SHOW_START,{modal:this})},_onTransitionEnd:function(e){var i={modal:this},n=this._map;this._visible?n.fire(t.Map.Modal.CHANGED,i):t.DomUtil.hasClass(this._container,this.options.SHOW_CLS)?(this._visible=!0,n.fire(t.Map.Modal.SHOW,i)):n.fire(t.Map.Modal.HIDE,i)},_onCloseClick:function(e){t.DomEvent.stop(e),this._hide()},_render:function(e){if(this._container.innerHTML=t.Util.template(e.wrapperTemplate,t.Util.extend({},e,{_content:t.Util.template(e.template,e)})),e.element){var i=this._container.querySelector(t.Map.Modal.classNameToSelector(this.options.MODAL_CONTENT_CLS));i&&i.appendChild(e.element)}},_getContentContainer:function(){return this._container.querySelector(t.Map.Modal.classNameToSelector(this.options.MODAL_CONTENT_CLS))},_getInnerContentContainer:function(){return this._container.querySelector(t.Map.Modal.classNameToSelector(this.options.INNER_CONTENT_CLS))},_setContainerSize:function(t){var e=this._getContentContainer();t.width&&(e.style.width=t.width+"px"),t.height&&(e.style.height=t.height+"px")},_hideInternal:function(){this._visible=!1,t.DomUtil.removeClass(this._container,this.options.SHOW_CLS)},_hide:function(){this._visible&&(this._hideInternal(),t.Util.requestAnimFrame(this._onTransitionEnd,this))},_onMouseDown:function(e){t.DomEvent.stop(e);var i=e.target||e.srcElement;t.DomUtil.hasClass(i,this.options.MODAL_CLS)&&this._hide()},_onKeyDown:function(t){27===(t.keyCode||t.which)&&this._hide()}}),t.Map.addInitHook("addHandler","modal",t.Map.Modal),t.Map.include({openModal:function(t){return this.fire("modal",t)},closeModal:function(){return this.modal.hide(),this}}),t.Map.Modal}));
//# sourceMappingURL=L.Modal.min.js.map
